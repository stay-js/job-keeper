# JobKeeper - Dokument√°ci√≥

## Production app el√©r√©se: [job-keeper.znagy.hu](https://job-keeper.znagy.hu) (Clerk is prod m√≥dba, prod adatb√°zissal)

## 1. Fejleszt≈ëi Dokument√°ci√≥

### 1.1. Projekt √Åttekint√©s

A JobKeeper egy Next.js-alap√∫ webalkalmaz√°s, amely a k√ºl√∂nb√∂z≈ë di√°kmunk√°kb≈ël sz√°rmaz√≥ j√∂vedelmek √∂sszegz√©s√©re, rendszerez√©s√©re szolg√°l.

A projekt a Next.js keretrendszeren alapul, TypeScript nyelven √≠r√≥dott, √©s a k√∂vetkez≈ë f≈ëbb technol√≥gi√°kat haszn√°lja:

- **Next.js**: React keretrendszer szerver oldali renderel√©si k√©pess√©gekkel
- **Drizzle ORM**: TypeScript alap√∫ ORM adatb√°zis-kezel√©shez
- **Zod**: S√©ma-valid√°ci√≥
- **React Hook Form**: ≈∞rlapkezel√©s
- **Tailwind CSS**: CSS keretrendszer
- **Shadcn UI**: UI komponens k√∂nyvt√°r
- **MySQL**: Rel√°ci√≥s adatb√°zis-kezel≈ë rendszer

### 1.2. Projekt Strukt√∫ra

TODO

### 1.3. Adatb√°zis S√©ma

Az alkalmaz√°s k√©t f≈ë adatb√°zis t√°bl√°t haszn√°l, egyel≈ëre (TODO felhaszn√°l√≥ kezel√©s):

#### 1.3.1. Poz√≠ci√≥k (`positions`)

```typescript
export const positions = createTable(
  'positions',
  (d) => ({
    id: d.bigint('id', { mode: 'number' }).primaryKey().autoincrement(),
    userId: d.varchar('user_id', { length: 256 }).notNull(),
    name: d.varchar('name', { length: 256 }).notNull(),
    wage: d.float('wage').notNull(),
  }),
  (t) => [index('wage_idx').on(t.wage)],
);
```

#### 1.3.2. Munk√°k (`jobs`)

```typescript
export const jobs = createTable(
  'jobs',
  (d) => ({
    id: d.bigint('id', { mode: 'number' }).primaryKey().autoincrement(),
    userId: d.varchar('user_id', { length: 256 }).notNull(),
    location: d.varchar('location', { length: 256 }).notNull(),
    event: d.varchar('event', { length: 256 }),
    date: d.date('date', { mode: 'string' }).notNull(),
    hours: d.float('hours').notNull(),
    positionId: d
      .bigint('position_id', { mode: 'number' })
      .notNull()
      .references(() => positions.id, { onDelete: 'no action' }),
  }),
  (t) => [index('by_wage_idx').on(t.positionId)],
);
```

#### 1.3.3. Felhaszn√°l√≥i be√°ll√≠t√°sok (`user_preferences`)

```typescript
export const userPreferences = createTable('user_preferences', (d) => ({
  userId: d.varchar('user_id', { length: 256 }).primaryKey(),
  currency: d.varchar('currency', { length: 16 }).notNull(),
  locale: d.varchar('locale', { length: 16 }).notNull(),
  precision: d.int('precision').notNull(),
}));
```

### 1.4. Futtat√°s √©s Fejleszt√©s

#### 1.4.1. El≈ëk√©sz√ºletek

- `.env-example` f√°jlban tal√°lhat√≥ak a sz√ºks√©ges k√∂rnyezeti v√°ltoz√≥k. Ezt a f√°jlt √°t kell nevezni `.env`-re.
  - `DATABASE_URL` fel√ºl√≠r√°sa amennyiben a hostolt adatb√°zist szeretn√©nk haszn√°lni.
  - `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` √©s `CLERK_SECRET_KEY` fel√ºl√≠r√°sa a saj√°t Clerk kulcsainkkal.
- Amennyiben m√©g nincs, Node.js telep√≠t√©se: [https://nodejs.org/](https://nodejs.org/)
- Amennyiben m√©g nincs, pnpm telep√≠t√©se (opcion√°lis l√©pes): `npm install -g pnpm`
- F√ºgg≈ës√©gek telep√≠t√©se: `pnpm install` vagy `npm install`

#### 1.4.2. Dev szerver futtat√°sa

PNPM:

```bash
pnpm dev
```

NPM:

```bash
npm run dev
```

#### 1.4.3. Buildel√©s √©s futtat√°s

PNPM:

```bash
pnpm build
pnpm start
```

NPM:

```bash
npm run build
npm run start
```

## 2. Felhaszn√°l√≥i Dokument√°ci√≥

√údv√∂zl√ºnk a JobKeeperben! Ez az √∫tmutat√≥ seg√≠t neked abban, hogy a legt√∂bbet hozd ki az alkalmaz√°sb√≥l. A JobKeeper c√©lja, hogy egyszer≈±s√≠tse a munk√°id, a ledolgozott √≥r√°id √©s a bev√©teleid nyomon k√∂vet√©s√©t.

## üìã Tartalomjegyz√©k

1. [Els≈ë L√©p√©sek: Az Els≈ë Bel√©p√©s](#1-els≈ë-l√©p√©sek-az-els≈ë-bel√©p√©s)
2. [Az Alapok: Poz√≠ci√≥k √©s Munk√°k](#2-az-alapok-poz√≠ci√≥k-√©s-munk√°k-jobs)
3. [Poz√≠ci√≥k Kezel√©se](#3-poz√≠ci√≥k-kezel√©se)
4. [Munk√°k (Jobs) Kezel√©se](#4-munk√°k-jobs-kezel√©se)
5. [Profilbe√°ll√≠t√°sok M√≥dos√≠t√°sa](#5-profilbe√°ll√≠t√°sok-m√≥dos√≠t√°sa)

---

## 2.1. Els≈ë L√©p√©sek: Az Els≈ë Bel√©p√©s

Amikor el≈ësz√∂r l√©psz be a JobKeeper fi√≥kodba, az alkalmaz√°s felk√©r, hogy √°ll√≠tsd be a szem√©lyes preferenci√°idat. Ezek a be√°ll√≠t√°sok biztos√≠tj√°k, hogy az adatok a sz√°modra legmegfelel≈ëbb form√°tumban jelenjenek meg.

### Ezeket az adatokat kell megadnod:

**D√°tum- √©s Id≈ëform√°tum (Locale):** Itt v√°laszthatod ki a r√©gi√≥dat (pl. Magyarorsz√°g, hu). Ez hat√°rozza meg, hogy a d√°tumok √©s sz√°mok milyen form√°tumban jelennek meg.
- **P√©ld√°ul:** A magyar (hu) be√°ll√≠t√°s eset√©n a d√°tum `2023. 12. 24.` form√°tum√∫ lesz, m√≠g az amerikai angol (en-US) eset√©n `12/24/2023`.

**P√©nznem (Currency):** V√°laszd ki azt a p√©nznemet, amelyben a fizet√©sedet kapod (pl. HUF, EUR, USD). Az alkalmaz√°s ebben a p√©nznemben fogja megjelen√≠teni az √≥rab√©reket √©s a teljes keresetet.

**Kerek√≠t√©s (Precision):** Itt adhatod meg, hogy a sz√°mok (p√©ld√°ul a ledolgozott √≥r√°k) h√°ny tizedesjegy pontoss√°ggal jelenjenek meg.

Opci√≥k:
- **0:** Nincs tizedesjegy (pl. 8 √≥ra).
- **1:** Egy tizedesjegy (pl. 7,5 √≥ra).
- **2:** K√©t tizedesjegy (pl. 6,25 √≥ra).

> üí° **Tipp:** Ezeket a be√°ll√≠t√°sokat k√©s≈ëbb b√°rmikor m√≥dos√≠thatod a profilodban.

---

## 2.2. Az Alapok: Poz√≠ci√≥k √©s Munk√°k (Jobs)

Az alkalmaz√°s k√©t f≈ë fogalom k√∂r√© √©p√ºl: **Poz√≠ci√≥k (Positions)** √©s **Munk√°k (Jobs)**.

**Poz√≠ci√≥ (Position):** Ez egy √°ltal√°nos munkak√∂r, amihez egy adott √≥rab√©r tartozik. P√©ld√°ul: "Pinc√©r", "Grafikus", "Fut√°r". L√©nyeg√©ben ez a *"milyen munk√°t v√©gzel"* k√©rd√©sre a v√°lasz.

**Munka (Job):** Ez egy konkr√©t, elv√©gzett munkaalkalom vagy m≈±szak. Egy munk√°hoz mindig tartozik egy d√°tum, helysz√≠n √©s a ledolgozott √≥r√°k sz√°ma. Minden munk√°t egy m√°r l√©tez≈ë poz√≠ci√≥hoz kell hozz√°rendelned.

> ‚ö†Ô∏è **FONTOS:** Miel≈ëtt r√∂gz√≠ten√©l egy munk√°t (Job), l√©tre kell hoznod legal√°bb egy poz√≠ci√≥t. A rendszer nem is engedi m√°sk√©pp, a munk√°k felv√©tel√©n√©l csak a m√°r megl√©v≈ë poz√≠ci√≥id k√∂z√ºl v√°laszthatsz.

---

## 2.3. Poz√≠ci√≥k Kezel√©se

A poz√≠ci√≥idat a **Positions** f√ºl√∂n kezelheted. Itt l√°thatod az √∂sszes eddig l√©trehozott poz√≠ci√≥dat, a hozz√°juk tartoz√≥ √≥rab√©rt √©s az azokban ledolgozott √∂sszes√≠tett √≥rasz√°mot.

### √öj poz√≠ci√≥ l√©trehoz√°sa

1. Navig√°lj a **Positions** f√ºlre.
2. Kattints az **Add new** gombra.
3. A felugr√≥ ablakban add meg a k√∂vetkez≈ëket:
   - **Name:** A poz√≠ci√≥ neve (pl. "Rendezv√©nyszervez≈ë").
   - **Hourly Wage:** Az ehhez a poz√≠ci√≥hoz tartoz√≥ √≥rab√©r.
4. Kattints a **Save changes** gombra a ment√©shez.

### Poz√≠ci√≥ szerkeszt√©se √©s t√∂rl√©se

**Szerkeszt√©s:** Kattints a t√°bl√°zatban a szerkeszteni k√≠v√°nt poz√≠ci√≥ sor√°ra. A felugr√≥ ablakban m√≥dos√≠thatod a nevet vagy az √≥rab√©rt.

**T√∂rl√©s:** Egy poz√≠ci√≥t csak akkor tudsz t√∂r√∂lni, ha m√©g egyetlen munk√°t (Job) sem r√∂gz√≠tett√©l hozz√°. Ha a poz√≠ci√≥ t√∂r√∂lhet≈ë, a szerkeszt≈ë ablakban megjelenik a **Delete** gomb.

---

## 2.4. Munk√°k (Jobs) Kezel√©se

Az elv√©gzett munk√°idat a **Jobs** f√ºl√∂n r√∂gz√≠theted √©s tekintheted meg. A fel√ºlet alap√©rtelmezetten az aktu√°lis havi munk√°idat mutatja.

- **Navig√°ci√≥ a h√≥napok k√∂z√∂tt:** A d√°tum feletti `<` √©s `>` nyilakkal tudsz v√°ltani az el≈ëz≈ë √©s a k√∂vetkez≈ë h√≥nap k√∂z√∂tt.
- **Havi √∂sszegz√©s:** A t√°bl√°zat alj√°n l√°thatod az adott h√≥napban ledolgozott √≥r√°k √©s a teljes kereset √∂sszegz√©s√©t, poz√≠ci√≥nk√©nt lebontva is.

### √öj munka hozz√°ad√°sa

1. Navig√°lj a **Jobs** f√ºlre.
2. Kattints az **Add new** gombra.
3. A felugr√≥ ablakban t√∂ltsd ki a mez≈ëket:
   - **Date:** A munka d√°tuma.
   - **Location:** A munka helysz√≠ne.
   - **Event:** Az esem√©ny vagy feladat r√∂vid le√≠r√°sa (pl. "C√©ges kar√°csony", "Log√≥tervez√©s").
   - **Position:** A leg√∂rd√ºl≈ë list√°b√≥l v√°laszd ki azt a poz√≠ci√≥t, amelyben a munk√°t v√©gezted. *(Ez√©rt kell el≈ësz√∂r poz√≠ci√≥t l√©trehozni!)*
   - **Hours:** A ledolgozott √≥r√°k sz√°ma.
4. Kattints a **Save changes** gombra.

### Munka szerkeszt√©se √©s t√∂rl√©se

Kattints a t√°bl√°zatban a m√≥dos√≠tani vagy t√∂r√∂lni k√≠v√°nt munka sor√°ra. A felugr√≥ ablakban m√≥dos√≠thatod az adatokat, vagy a **Delete** gombbal v√©glegesen t√∂r√∂lheted a bejegyz√©st.

---

## 2.5. Profilbe√°ll√≠t√°sok M√≥dos√≠t√°sa

Ha m√≥dos√≠tani szeretn√©d a d√°tumform√°tumot, a p√©nznemet vagy a kerek√≠t√©si be√°ll√≠t√°sokat, azt egyszer≈±en megteheted a profilodban.

1. Kattints a jobb fels≈ë sarokban tal√°lhat√≥ profil ikonodra.
2. A leny√≠l√≥ men√ºben v√°laszd az **Update Locale & Currency** opci√≥t.
3. A felugr√≥ ablakban m√≥dos√≠thatod a k√≠v√°nt be√°ll√≠t√°sokat, majd a **Save changes** gombra kattintva mentheted a v√°ltoztat√°sokat.

---

## üéâ K√©szen √°llsz!

Most m√°r minden eszk√∂z a kezedben van ahhoz, hogy hat√©konyan k√∂vesd a munk√°idat √©s bev√©teleidet a JobKeeper seg√≠ts√©g√©vel. Kellemes haszn√°latot!